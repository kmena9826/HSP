<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="~/manifest.json">
    <link rel="shortcut icon" type="image/x-icon" href="~/icono-ah.ico" />
    <title>AH - @ViewBag.Title</title>
    <link href="~/Content/bootstrap400b2.css" rel="stylesheet" />
    <link href="~/Content/style-adminator.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <style>
        #loader {
            transition: all 0.3s ease-in-out;
            opacity: 1;
            visibility: visible;
            position: fixed;
            height: 100vh;
            width: 100%;
            background: #fff;
            z-index: 90000;
        }

            #loader.fadeOut {
                opacity: 0;
                visibility: hidden;
            }

        .spinner {
            width: 40px;
            height: 40px;
            position: absolute;
            top: calc(50% - 20px);
            left: calc(50% - 20px);
            background-color: #333;
            border-radius: 100%;
            -webkit-animation: sk-scaleout 1.0s infinite ease-in-out;
            animation: sk-scaleout 1.0s infinite ease-in-out;
        }

        @@-webkit-keyframes sk-scaleout {
            0% {
                -webkit-transform: scale(0)
            }

            100% {
                -webkit-transform: scale(1.0);
                opacity: 0;
            }
        }

        @@keyframes sk-scaleout {
            0% {
                -webkit-transform: scale(0);
                transform: scale(0);
            }

            100% {
                -webkit-transform: scale(1.0);
                transform: scale(1.0);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="app">
    <div id="loader">
        <div class="spinner"></div>
    </div>
    <script type="text/javascript">
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            setTimeout(() => {
                loader.classList.add('fadeOut');
            }, 250);
        });
    </script>
    <div>
        @Html.Partial("_Sidebar");
        <div class="page-container">
            @Html.Partial("_HeaderNavbar");
            <main class="main-content bgc-grey-100">
                <div id="mainContent">
                    @RenderBody()
                </div>
            </main>
            <footer class="bdT ta-c p-30 lh-0 fsz-sm c-grey-600">
                <span>
                    <a href="http://corpsoftsa.com/corpsoft/" target="_blank" title="Corpsoft">Corpsoft </a>
                    &copy;   @DateTime.Now.Year - HOSPITALARIO
                   
                </span>
            </footer>
        </div>
    </div>
    <script src="~/Scripts/vendor.js"></script>
    <script src="~/Scripts/bundle.js"></script>

    @*<script src="~/Scripts/rocket-loader.min.js"></script>*@
    @*<script src="~/Scripts/jquery-3.4.1.min.js"></script>*@
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    @RenderSection("Scripts", required: false)
    <script>
        $(document).ready(function () {
                $.ajax({
                    type: "GET",
                    url: '/Home/ListarMenuAcceso',
                    success: function (data) {
                        let menu = data;
                        var menudb;
                        menudb = '<ul class="sidebar-menu scrollable pos-r">';
                        menudb += '<li class="nav-item"><a id="mPrincipal" class="sidebar-link" href="@Url.Action("Index","Home")" default><span class="icon-holder"><i class="color-primary fas fa-h-square"></i></span><span class="title">Principal</span></a></li>';
                        menu.forEach(function (element) {
                            menuitem = element['MenuItems'];
                            menudb += '<li class="nav-item dropdown"><a id="m' + element['MenuNavegacion'] + '" class="dropdown-toggle" href="javascript:void(0);">' +
                                '<span class="icon-holder"><i class="' + element['Icono'] + '"></i></span >' +
                                '<span class="title">' + element['MenuNavegacion'] + '</span>' +
                                '<span class="arrow"><i class="ti-angle-right"></i></span ></a><ul class="dropdown-menu" style="display: none;">';
                            menuitem.forEach(function (item) {
                                menudb += '<li><a class="sidebar-link" href="../' + item['ActionName'] + '/' + item['LinkText'] + '">Admisiones</a></li>';
                            });
                            menudb += '</ul></li>';
                        });
                        menudb += '</ul>'
                        $("#menu").append(menudb);
                    },
                    error: function () {
                        alert('Error');
                    }
                })
                $(".sidebar-link").each(function () {
                    if ($(this).hasClass('active')){
                        $(this).removeClass('active');
                    }
                });

                $("#@ViewBag.Modulo").addClass('active');

                $("#sidebar-toggle").click(function () {
                    if ($("body").hasClass("is-collapsed")) {
                        $("body").removeClass("is-collapsed");
                    }
                    else {
                        $("body").addClass("is-collapsed");
                    }
                });
                $("#user-actual").click(function () {
                    if ($("#user-actual").hasClass("show")) {
                        $("#user-actual").removeClass("show");
                        $("#user-act-opts").removeClass("show");
                    }
                    else {
                        $("#user-actual").addClass("show");
                        $("#user-act-opts").addClass("show");
                    }
                });
            });
            $(document).on("click", function (e) {

                var uactual = $("#user-actual");

                if (!uactual.is(e.target) && uactual.has(e.target).length === 0) {
                    if ($("#user-actual").hasClass("show")) {
                        $("#user-actual").removeClass("show");
                        $("#user-act-opts").removeClass("show");
                    }
                }

                var nuser = $("#notificaciones-user");

                if (!nuser.is(e.target) && nuser.has(e.target).length === 0) {
                    if ($("#notif-user").hasClass("show")) {
                        $("#notif-user").removeClass("show");
                        $("#notificaciones-user-view").removeClass("show");
                    }
                }
            });

    </script>
</body>
</html>
